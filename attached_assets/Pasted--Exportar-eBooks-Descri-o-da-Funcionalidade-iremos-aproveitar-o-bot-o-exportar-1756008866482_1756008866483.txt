### üìÑ Exportar eBooks

#### üß© **Descri√ß√£o da Funcionalidade**

 iremos aproveitar o bot√£o exportar na tela de detalhe do eBook que permitir√° ao usu√°rio exportar o conte√∫do do eBook ‚Äî composto por imagens de atividades organizadas em sequ√™ncia ‚Äî para um arquivo PDF. Esse bot√£o ter√° destaque visual (cor azul) e, ao ser clicado, iniciar√° a gera√ß√£o do PDF com as imagens no formato A4. Durante o processo, ser√° exibido um modal com um loader indicando que o eBook est√° sendo gerado. Ap√≥s a conclus√£o, o arquivo ser√° disponibilizado para download (no desktop) ou compartilhamento com outras aplica√ß√µes (em dispositivos m√≥veis).
#### ‚úÖ **Requisitos Funcionais**

1. **Bot√£o "Exportar para PDF"**
    - Na tela client/src/pages/DetalheEBookPage.tsx exibir bot√£o destacado (azul) na tela de detalhe do eBook.
    - Posicionado antes dos bot√µes de "Editar" e "Clonar" (no in√≠cio da tela).
    - Retire o bot√£o, visualizar Livro.
        
2. **Gera√ß√£o do PDF**
    - Recuperar as imagens das atividades com base na sequ√™ncia do array de IDs do eBook.
    - Cada imagem deve ser renderizada em uma p√°gina no formato A4 (orienta√ß√£o vertical).
    - As imagens devem ser carregadas via URL previamente cadastrada.
    - Caso necess√°rio instalar biblioteca para gera√ß√£o do PDF.
        
3. **Processamento com Feedback**
    - Exibir modal com loading animado e texto: ‚ÄúGerando seu eBook...‚Äù
    - Fechar o modal automaticamente ap√≥s finaliza√ß√£o do PDF.
        
4. **Download/Compartilhamento**
    - Em **dispositivos m√≥veis**: abrir menu nativo de compartilhamento (ex: WhatsApp, e-mail, drive).
    - Em **desktop**: iniciar download autom√°tico do arquivo PDF gerado.
        
5. **Mensagens de Erro**    
    - Caso ocorra falha na gera√ß√£o ou carregamento das imagens, exibir mensagem: ‚ÄúN√£o foi poss√≠vel gerar o eBook. Tente novamente mais tarde.‚Äù
    
#### üìÅ **Pastas e Arquivos Permitidos**

```
client/src/components/ebooks (pasta para os componentes)

client/src/pages/DetalheEBookPage.tsx (alterar)

client/src/contexts (criar contexto se necess√°rio)
client/src/hooks (criar hooks se necess√°rio)
```

Observa√ß√£o: as informa√ß√µes de ebooks devem ser acess√≠veis e compartilhadas em todas as telas da aplica√ß√£o

#### üîí **Restri√ß√µes de Seguran√ßa e Boas Pr√°ticas**

- N√£o modifique arquivos fora dos listados acima.
- N√£o crie nem modifique tabelas de banco de dados sem solicita√ß√£o expl√≠cita.
- N√£o apague ou sobrescreva dados sem instru√ß√£o clara.
- Toda vari√°vel sens√≠vel (como chaves de API, tokens ou URLs protegidas) deve ser armazenada em arquivos `.env` ou equivalente.
- Sempre perguntar antes de instalar bibliotecas externas ou adicionar depend√™ncias.
- Todas as opera√ß√µes que envolvam escrita ou leitura em banco de dados devem ser explicitamente solicitadas no prompt principal.
- Evitar comandos destrutivos ou irrevers√≠veis, como `DELETE`, exceto sob instru√ß√£o expl√≠cita.
- Assegure-se de n√£o expor dados sens√≠veis no frontend.

#### üìå **Orienta√ß√µes de Desenvolvimento Padr√£o**

- Usar nomes claros e sem√¢nticos para vari√°veis e fun√ß√µes.
- Dividir responsabilidades entre componentes (ex: l√≥gica de autentica√ß√£o separada da UI).
- Comentar trechos de l√≥gica complexa.
- Priorizar c√≥digo limpo, reutiliz√°vel e organizado.
- Validar entradas do usu√°rio sempre que aplic√°vel.
- Preferir fun√ß√µes puras e evitar efeitos colaterais n√£o controlados.
- Priorizar acessibilidade e compatibilidade responsiva na interface.

#### Informa√ß√µes sobre o Banco de dados

Os dados de eBooks s√£o armazenados na cole√ß√£o `/usuarios/{userId}/ebooks/{ebookId}`

- Regras atuais do Firestore

```
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    match /usuarios/{userId} {      
      allow read, write: if request.auth != null && request.auth.uid == userId;
    
    	match /ebooks/{ebookId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
    }

		match /assinaturas/{email} {
      allow read: if request.auth != null && request.auth.token.email == email;
    }

    match /{document=**} {
      allow read, write: if false;
    }
  }
```


#### Modelo para eBook

```json
{
	"id": "3956fdee-4ef7-403a-bd35-d1d155dca974",
	"nome": "Atividades de F√©rias do Jo√£o",
	"data": "2025-12-23T22:30:00",
	"atividades": [
		"f0eed885-7112-4b4d-b124-054821a54e44"
	]
}
```