#### ğŸ§© **DescriÃ§Ã£o da Funcionalidade**

Implementar a **pÃ¡gina de VÃ­deos** com a mesma lÃ³gica de organizaÃ§Ã£o usada em eBooks: **Categorias â†’ Atividades (itens de vÃ­deo)**.  
Nesta primeira etapa, o foco Ã© disponibilizar o **catÃ¡logo de vÃ­deos organizado por categorias**, com tela de **listagem por categoria** e **detalhe do vÃ­deo** (player + metadados). Recursos de progresso, favoritos e playlists pessoais podem vir depois.

A experiÃªncia deve funcionar para **usuÃ¡rios logados** (com e sem assinatura). Quem **nÃ£o tiver assinatura ativa** enxerga todo o catÃ¡logo, mas com **reproduÃ§Ã£o limitada** (trecho de prÃ©via) e **aÃ§Ãµes bloqueadas** (ex.: baixar transcriÃ§Ã£o/arquivo, marcar como concluÃ­do).

---

#### âœ… **Requisitos Funcionais**

##### ğŸ“š CatÃ¡logo (Read)

- **PÃ¡gina /videos** exibindo **todas as categorias** (grade responsiva).
- Ao clicar em uma categoria, abrir **/videos/categoria/:id** com a **lista de atividades de vÃ­deo** pertencentes Ã  categoria.
- **Busca e filtros** (texto, tags, duraÃ§Ã£o aproximada) opcionais, mas prepare os hooks para filtrar localmente.
- Itens mostram: **thumbnail**, **tÃ­tulo**, **duraÃ§Ã£o**, **selo â€œpremiumâ€** (se exigir assinatura).

##### â–¶ï¸ Detalhe do VÃ­deo

- **/videos/:videoId** com:
    - Player (YouTube/Vimeo/MP4).
    - TÃ­tulo, descriÃ§Ã£o, duraÃ§Ã£o, tags, materiais relacionados (links/arquivos).
    - BotÃ£o **â€œAssistir agoraâ€**.
    - Para quem **nÃ£o tem assinatura**:
        - Tocar **apenas prÃ©via** (config `trailerStart`/`trailerEnd`) ou exibir overlay bloqueando o player apÃ³s X segundos.
        - Mostrar **mensagem clara** e **CTA** â€œAtivar Assinatura para Assistir Completoâ€ (link temporÃ¡rio `https://google.com`).

##### ğŸ” Assinatura e Acesso

- UsuÃ¡rio **deve estar logado** para carregar a pÃ¡gina.
- Sem assinatura ativa:
    - **CatÃ¡logo visÃ­vel**, porÃ©m **reproduÃ§Ã£o completa bloqueada**.
    - Download de anexos/transcriÃ§Ãµes **bloqueado**.
    - Exibir **CTA** para ativar assinatura.
- Com assinatura ativa:
    - ReproduÃ§Ã£o completa liberada.
    - Acesso a anexos/transcriÃ§Ãµes.

> ObservaÃ§Ã£o: **NÃ£o hÃ¡ CRUD de vÃ­deos/categorias para o usuÃ¡rio final** nesta etapa. O catÃ¡logo Ã© global (administrado por staff). Em etapas futuras, podemos adicionar **â€œMinhas Playlistsâ€** (CRUD do usuÃ¡rio), progresso e favoritos.

---

#### ğŸ—ƒï¸ **Modelos de Dados (Firestore)**

**ColeÃ§Ãµes globais (catÃ¡logo):**

- `/videos_categorias/{categoriaId}`
    
    `{   "id": "cat-cores-formas",   "nome": "Cores e Formas",   "descricao": "VÃ­deos para reconhecer cores e formas",   "ordem": 10,   "coverUrl": "https://.../thumb.jpg",   "tags": ["cores","formas","2-6"],   "qtdVideos": 18,   "createdAt": "2025-08-24T19:00:00Z",   "updatedAt": "2025-08-24T19:00:00Z",   "ativo": true }`
    
- `/videos_atividades/{videoId}`
    
    `{   "id": "vid-abc-001",   "categoriaId": "cat-cores-formas",   "titulo": "Cores primÃ¡rias brincando",   "descricao": "Aprenda cores com atividades prÃ¡ticas.",   "videoUrl": "https://youtu.be/XXXXXXXX",   "plataforma": "youtube",                    // youtube | vimeo | mp4   "duracaoSegundos": 540,   "thumbnailUrl": "https://.../thumb.jpg",   "tags": ["cores","lÃºdico","motricidade"],   "premium": true,                            // exige assinatura para ver completo   "trailerStart": 0,                          // inÃ­cio da prÃ©via (segundos)   "trailerEnd": 60,                           // fim da prÃ©via (segundos)   "materiaisRelacionados": [     {"tipo": "pdf", "titulo": "Guia de atividades", "url": "https://.../guia.pdf"}   ],   "transcricaoUrl": "https://.../transcricao.txt",   "createdAt": "2025-08-24T19:05:00Z",   "updatedAt": "2025-08-24T19:05:00Z",   "ativo": true }`
    

**ColeÃ§Ãµes do usuÃ¡rio (preparadas para prÃ³ximas fases, usadas aqui sÃ³ para leitura condicional de UI):**
- `/usuarios/{userId}/assinatura` (status jÃ¡ usado na aplicaÃ§Ã£o).
- Futuro: `/usuarios/{userId}/videos_progresso/{videoId}`, `/usuarios/{userId}/playlists/{playlistId}`.
#### ğŸ§­ **Rotas e Telas**

- `/videos` â†’ **VideosPage.tsx** (grade de categorias).
- `/videos/categoria/:categoriaId` â†’ **AtividadesPorCategoriaVideo.tsx** (lista de vÃ­deos da categoria).
- `/videos/:videoId` â†’ **DetalheVideoPage.tsx** (player e metadados).
---
#### ğŸ§± **Pastas e Arquivos Permitidos**

`client/src/components/videos              (NOVO: componentes de UI de vÃ­deos)   - CategoriaCardVideo.tsx   - CategoriaGridVideo.tsx   - VideoCard.tsx   - VideoList.tsx   - VideoPlayer.tsx   // wrapper que respeita trailerStart/trailerEnd  client/src/pages/VideosPage.tsx           (CRIAR/ALTERAR) client/src/pages/AtividadesPorCategoriaVideo.tsx (CRIAR) client/src/pages/DetalheVideoPage.tsx     (CRIAR)  client/src/contexts/VideosContext.tsx     (CRIAR - carregar catÃ¡logo e estado de assinatura) client/src/hooks/useVideos.ts             (CRIAR) client/src/hooks/useSubscription.ts       (REUTILIZAR/CRIAR se necessÃ¡rio)`
> **NÃ£o** modifique arquivos fora dos listados acima.
---
#### ğŸ§ª **Comportamentos de UI obrigatÃ³rios**

- **Sem assinatura ativa**:
    - Nos cards e no detalhe, exibir **badge â€œPREMIUMâ€** quando `premium = true`.
    - Player corta em `trailerEnd` ou exibe overlay de bloqueio com CTA.
    - Download de `transcricaoUrl` e `materiaisRelacionados` **desativado**.
- **Com assinatura ativa**:
    - Player **completo**.
    - AÃ§Ãµes habilitadas (baixar transcriÃ§Ã£o e materiais).
---

#### ğŸ” **Boas PrÃ¡ticas e SeguranÃ§a**

- Nunca expor chaves sensÃ­veis no frontend (players privados â†’ usar URLs pÃºblicas ou proxy controlado).
- Validar parÃ¢metros de rota (`categoriaId`, `videoId`) e **tratar 404**.
- Centralizar lÃ³gica de assinatura no **VideosContext** para evitar repetiÃ§Ã£o.
- NÃ£o criar/modificar tabelas sem solicitaÃ§Ã£o.
- Evitar comandos destrutivos.
- ComentÃ¡rios nos trechos de lÃ³gica (ex.: controle de trailer).
---
#### ğŸ§­ **OrientaÃ§Ãµes de Desenvolvimento**
- Componentizar: cards, grids e player reutilizÃ¡veis.
- Nomes semÃ¢nticos, cÃ³digo limpo e testÃ¡vel.
- Acessibilidade: foco visÃ­vel, labels em botÃµes, `aria-*` no player.
- Responsividade: grid fluido (minmax) para categorias e vÃ­deos.
- Preparar `useVideos` com:
    - `listCategorias()`, `listVideosByCategoria(categoriaId)`, `getVideo(videoId)`.
    - Cache em memÃ³ria (Context) e invalidaÃ§Ã£o simples por `updatedAt`.
---
#### ğŸ§© **Exemplo de Props dos Componentes**

`type Categoria = {   id: string; nome: string; descricao?: string;   coverUrl?: string; ordem?: number; tags?: string[];   qtdVideos?: number; ativo: boolean; };  type VideoAtividade = {   id: string; categoriaId: string; titulo: string; descricao?: string;   videoUrl: string; plataforma: 'youtube'|'vimeo'|'mp4';   duracaoSegundos?: number; thumbnailUrl?: string; tags?: string[];   premium?: boolean; trailerStart?: number; trailerEnd?: number;   materiaisRelacionados?: {tipo: 'pdf'|'link'|'img', titulo: string, url: string}[];   transcricaoUrl?: string; ativo: boolean; };`

---
#### ğŸ” **CritÃ©rios de Aceite**

- `/videos` lista categorias com **imagens, nome e contagem**.
- Ao abrir uma categoria, lista-se **somente vÃ­deos ativos** daquela categoria.
- PÃ¡gina de detalhe:
    - Player carrega, respeita **bloqueio/preview** conforme assinatura.
    - Metadados e botÃµes exibidos corretamente.
- **Sem assinatura**: preview ou bloqueio + CTA.
- **Com assinatura**: reproduÃ§Ã£o integral e downloads liberados.
- Nenhuma dependÃªncia externa nova instalada (salvo aprovaÃ§Ã£o prÃ©via).
---
#### ğŸ—ºï¸ **PrÃ³ximas Etapas (nÃ£o incluÃ­das agora, mas preparar estrutura)**
- **Progresso** (assistido %, Ãºltimo tempo visto).
- **Favoritos** e **Playlists do UsuÃ¡rio** (CRUD em `/usuarios/{userId}/playlists`).
- **RelatÃ³rios** (tempo assistido, vÃ­deos mais vistos).
- **ModeraÃ§Ã£o/Admin** (CRUD de catÃ¡logo com painel separado).

### ğŸ¥ Cadastro de VÃ­deos Educativos - Parte 1

#### ğŸ§© **DescriÃ§Ã£o da Funcionalidade**

Essa funcionalidade tem como objetivo permitir que usuÃ¡rios autenticados e com assinatura vÃ¡lida possam **criar, gerenciar e organizar seus prÃ³prios catÃ¡logos de vÃ­deos educativos**, agrupando-os por **categorias e atividades**, assim como no sistema de eBooks.

Cada vÃ­deo pode ser associado a uma ou mais **atividades sugeridas**, **frases impactantes**, **tÃ³picos abordados**, **estrutura de roteiro** e **objetivos pedagÃ³gicos**. As interaÃ§Ãµes com o conteÃºdo (como salvar, editar, excluir ou clonar catÃ¡logos de vÃ­deos) sÃ£o feitas com salvamento automÃ¡tico.

---

### âœ… **Requisitos Funcionais**

#### ğŸ” AutenticaÃ§Ã£o e Acesso
- A funcionalidade estarÃ¡ disponÃ­vel apenas para usuÃ¡rios **logados**.
- UsuÃ¡rios sem assinatura ativa:
    - VerÃ£o os vÃ­deos, mas nÃ£o poderÃ£o salvar, organizar ou interagir com as listas.
    - Interface bloqueia aÃ§Ãµes e exibe mensagem: â€œAssine para organizar seus vÃ­deos e salvar atividades personalizadas.â€
    - BotÃ£o CTA: **â€œAtivar Assinatura para Salvar VÃ­deosâ€** â†’ `https://google.com` (atualizÃ¡vel depois).
---
### ğŸï¸ Cadastro e OrganizaÃ§Ã£o de VÃ­deos
#### ğŸ“ Criar Novo CatÃ¡logo de VÃ­deo (Create)
- UsuÃ¡rio pode criar um **catÃ¡logo personalizado** de vÃ­deos com nome Ãºnico.
- Cada catÃ¡logo pode conter:
    - Lista de vÃ­deos (YouTube ou link externo).
    - Categorias (como: ComunicaÃ§Ã£o, CoordenaÃ§Ã£o Motora, Crises, EstÃ­mulos Sociais).
    - Atividades sugeridas.
    - Resumo (transcriÃ§Ã£o opcional).
    - Frases impactantes do vÃ­deo.
    - TÃ³picos abordados (para facilitar busca).
    - Estrutura do vÃ­deo (roteiro ou tÃ³picos em ordem).
    - Data de cadastro.
---
### ğŸ“š Leitura e NavegaÃ§Ã£o (Read)
- Exibir **todos os catÃ¡logos** criados pelo usuÃ¡rio:
    - Em ordem alfabÃ©tica ou por data.
    - Com miniaturas do vÃ­deo principal (se disponÃ­vel via API).
    - Com badge de quantidade de vÃ­deos e atividades associadas.
- Cada vÃ­deo listado apresenta:
    - BotÃµes de **assistir, editar ou excluir**.
    - BotÃ£o de **ver atividades relacionadas**.
---
### âœï¸ EdiÃ§Ã£o e AtualizaÃ§Ã£o (Update)

- AlteraÃ§Ãµes sÃ£o salvas automaticamente:
    - Nome do catÃ¡logo.
    - Lista de vÃ­deos.
    - Atividades associadas.
    - Frases e estrutura do vÃ­deo.
---
### âŒ ExclusÃ£o (Delete)

- Excluir um catÃ¡logo com confirmaÃ§Ã£o.
- ExclusÃ£o permanente e irreversÃ­vel.
---
### ğŸ“‘ Clonagem

- UsuÃ¡rio pode **duplicar um catÃ¡logo de vÃ­deos**.
- Ao clonar:
    - Modal com campo preenchido: â€œNome original - CÃ³piaâ€.
    - Novo catÃ¡logo Ã© criado imediatamente.
---
### ğŸ¯ Destaque de VÃ­deo Selecionado
- O cabeÃ§alho da aplicaÃ§Ã£o (barra superior) exibe:
    - **Nome do CatÃ¡logo de VÃ­deo Selecionado**.
    - **Ãcone circular com nÃºmero de vÃ­deos incluÃ­dos**.
    - ClicÃ¡vel: redireciona para detalhes do catÃ¡logo.
    - Substitui o nome da aplicaÃ§Ã£o para responsividade.
---
### ğŸ—ƒï¸ Estrutura e Pastas

`client/src/components/videos/ client/src/pages/VideosPage.tsx client/src/pages/DetalheVideoPage.tsx client/src/contexts/VideosContext.tsx client/src/hooks/useVideos.tsx`
